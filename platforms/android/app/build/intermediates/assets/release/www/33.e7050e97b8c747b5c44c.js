(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{g0Bw:function(n,l,e){"use strict";e.r(l);var i=e("CcnG"),t=e("mrSG"),o=e("7wkb"),r=e("ICGH"),u=function(){return function(n,l,e,i,t,o){this.id=n,this.descripcion=l,this.url=e,this.categoria_descripcion=i,this.fecha=t,this.idCategoria=o}}(),c=e("jXL6"),a=e("sYLr"),s=e("mhKI"),p=e("ZZ/e"),b=function(){function n(n,l,e,i,t,o){this.genericService=n,this.loadingService=l,this.alertaService=e,this.sanitizer=i,this.modalController=t,this.alertCtrl=o,this.page=0,this.limit=10,this.videos=[],this.categorias=[],this.user=JSON.parse(localStorage.getItem("user")),this.chargeCategories()}return n.prototype.ngOnInit=function(){},n.prototype.ionRefresh=function(n){var l=this;setTimeout(function(){l.videos=[],l.page=0,n.target.complete(),l.cargarVideosByPage()},3e3)},n.prototype.cargarVideosByPage=function(){var n=this;this.videos=[],this.genericService.post("cursos/getVideosByPage",JSON.stringify(0!==this.page?{start:this.page*this.limit+1,end:this.limit}:{start:this.page,end:this.limit})).subscribe(function(l){l.parameters&&(l.parameters.forEach(function(l){n.videos.push(new u(l.id,l.descripcion,l.url,l.descripcion_categoria,l.fecha,l.idCategoria))}),console.log(n.videos)),n.page++,n.loadingService.hide()},function(l){console.log(l.error.description),console.log(l.error),n.loadingService.hide(),n.alertaService.warnAlert(n.genericService.headerError,l.error.description,null)})},n.prototype.returnUrl=function(n){var l=n.url,e="";if(l.split("youtube")[1]){var i=(t=l.split("v="))[1].split("&");e=i?i[0]:t[1]}else{var t;if(!(t=l.split(".be/")))return"";e=t[1]}return this.sanitizer.bypassSecurityTrustResourceUrl("https://img.youtube.com/vi/"+e+"/0.jpg")},n.prototype.editar=function(n){this.video=n,this.openCrud(2)},n.prototype.openCrud=function(n){return t.b(this,void 0,void 0,function(){var l,e=this;return t.e(this,function(i){switch(i.label){case 0:return 1!=n?[3,3]:[4,this.modalController.create({component:r.a,componentProps:{type:"Crear",categorias:this.categorias}})];case 1:return(l=i.sent()).onDidDismiss().then(function(n){var l=n.data.data;console.log(l),1==l?(e.page=0,e.cargarVideosByPage()):(console.log("Data null"),e.loadingService.hide())}),[4,l.present()];case 2:return[2,i.sent()];case 3:console.log("------------------------------"),console.log(this.video),this.openModalEdit(this.video),i.label=4;case 4:return[2]}})})},n.prototype.openModalEdit=function(n){return t.b(this,void 0,void 0,function(){var l,e=this;return t.e(this,function(i){switch(i.label){case 0:return[4,this.modalController.create({component:r.a,componentProps:{type:"Editar",video:n,categorias:this.categorias}})];case 1:return(l=i.sent()).onDidDismiss().then(function(n){console.log(n),console.log(n.data);var l=n.data.data;console.log(l),1==l?(e.page=0,e.cargarVideosByPage()):(console.log("Data null"),e.loadingService.hide())}),[4,l.present()];case 2:return[2,i.sent()]}})})},n.prototype.eliminar=function(n){return t.b(this,void 0,void 0,function(){var l=this;return t.e(this,function(e){switch(e.label){case 0:return[4,this.alertCtrl.create({header:"Confirmaci\xf3n",message:"\xbfEst\xe1s seguro de eliminar el video?, recuerda que ya no lo podr\xe1n ver tus usuarios.",buttons:[{text:"Cancelar",handler:function(){}},{text:"Aceptar",handler:function(){l.eliminarVideo(n)}}]})];case 1:return[4,e.sent().present()];case 2:return[2,e.sent()]}})})},n.prototype.eliminarVideo=function(n){return t.b(this,void 0,void 0,function(){var l,e=this;return t.e(this,function(i){return l={id:n.id},this.loadingService.show().then(function(){e.genericService.post("cursos/deleteCurso",JSON.stringify(l)).subscribe(function(l){if(console.log(l),"A"==l.status)return e.removeitem(n).then(function(){e.loadingService.hide()});e.alertaService.warnAlert(e.genericService.headerValidacion,l.description,null),e.loadingService.hide()},function(n){console.log(n),e.loadingService.hide(),e.alertaService.errorAlert(e.genericService.headerError,n.error.description,null)})}),[2]})})},n.prototype.removeitem=function(n){return t.b(this,void 0,void 0,function(){var l;return t.e(this,function(e){return l=this.videos.findIndex(function(l){return l.id==n.id}),this.videos=this.videos.slice(0,l).concat(this.videos.slice(l+1)),[2,new Promise(function(n){n(!0)})]})})},n.prototype.chargeCategories=function(){var n=this;this.categorias=[],this.genericService.post("categorias/categorias",JSON.stringify({})).subscribe(function(l){l.parameters&&(l.parameters.forEach(function(l){n.categorias.push(new o.a(l.id,l.descripcion,l.img_url,l.img_base64,l.color))}),n.cargarVideosByPage())},function(l){n.alertaService.errorAlert(n.genericService.headerError,l.error.description,null)})},n}(),d=function(){return function(){}}(),h=e("pMnS"),g=e("RIls"),f=e("IiMW"),v=e("OoFP"),m=e("oBZk"),y=e("Ip0R"),k=e("ZYjt"),q=i.ob({encapsulation:0,styles:[[".welcome-card[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{max-height:35vh;overflow:hidden}.margin_top[_ngcontent-%COMP%]{margin-top:0}.margin_top_list[_ngcontent-%COMP%]{margin-top:4px}.divText[_ngcontent-%COMP%]{margin-top:-5px}.divText[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;margin-right:5px}.popover-translucent.sc-ion-popover-ios-h[_ngcontent-%COMP%]   .popover-arrow.sc-ion-popover-ios[_ngcontent-%COMP%]:after, .popover-translucent.sc-ion-popover-ios-h[_ngcontent-%COMP%]   .popover-content.sc-ion-popover-ios[_ngcontent-%COMP%]{background:rgba(var(--ion-background-color-rgb,255,255,255),.8);top:47px;left:calc(62px - var(--ion-safe-area-right,0px))!important;-webkit-transform-origin:right top;transform-origin:right top;width:311px}"]],data:{}});function C(n){return i.Gb(0,[(n()(),i.qb(0,0,null,null,2,"div",[["class","contenedorSpinner"]],null,null,null,null,null)),(n()(),i.qb(1,0,null,null,1,"ion-spinner",[],null,null,null,m.ob,m.F)),i.pb(2,49152,null,0,p.tb,[i.h,i.k],null,null)],null,null)}function S(n){return i.Gb(0,[(n()(),i.qb(0,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(n,l){n(l,0,0,l.component.returnUrl(l.parent.context.$implicit))})}function w(n){return i.Gb(0,[(n()(),i.qb(0,0,null,null,0,"img",[["src","assets/imgs/videos/videos.png"]],null,null,null,null,null))],null,null)}function P(n){return i.Gb(0,[(n()(),i.qb(0,0,null,null,33,"ion-item-sliding",[["class","animated shake"]],null,null,null,m.db,m.v)),i.pb(1,49152,null,0,p.O,[i.h,i.k],null,null),(n()(),i.qb(2,0,null,0,15,"ion-item",[["class","margin_top"]],null,null,null,m.eb,m.s)),i.pb(3,49152,null,0,p.J,[i.h,i.k],null,null),(n()(),i.qb(4,0,null,0,5,"ion-avatar",[["slot","start"]],null,null,null,m.K,m.b)),i.pb(5,49152,null,0,p.h,[i.h,i.k],null,null),(n()(),i.hb(16777216,null,0,1,null,S)),i.pb(7,16384,null,0,y.i,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(n()(),i.hb(16777216,null,0,1,null,w)),i.pb(9,16384,null,0,y.i,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(n()(),i.qb(10,0,null,0,7,"ion-label",[],null,null,null,m.fb,m.w)),i.pb(11,49152,null,0,p.P,[i.h,i.k],null,null),(n()(),i.qb(12,0,null,0,1,"h2",[],null,null,null,null,null)),(n()(),i.Fb(13,null,["",""])),(n()(),i.qb(14,0,null,0,1,"h3",[],null,null,null,null,null)),(n()(),i.Fb(15,null,["Categor\xeda: ",""])),(n()(),i.qb(16,0,null,0,1,"p",[],null,null,null,null,null)),(n()(),i.Fb(17,null,["Fecha de creaci\xf3n: ",""])),(n()(),i.qb(18,0,null,0,15,"ion-item-options",[["class","margin_top"],["side","end"]],null,null,null,m.cb,m.u)),i.pb(19,49152,null,0,p.N,[i.h,i.k],{side:[0,"side"]},null),(n()(),i.qb(20,0,null,0,6,"ion-item-option",[],null,[[null,"click"]],function(n,l,e){var i=!0;return"click"===l&&(i=!1!==n.component.editar(n.context.$implicit)&&i),i},m.bb,m.t)),i.pb(21,49152,null,0,p.M,[i.h,i.k],null,null),(n()(),i.qb(22,0,null,0,4,"div",[["class","divText"]],null,null,null,null,null)),(n()(),i.qb(23,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),i.Fb(-1,null,["Editar"])),(n()(),i.qb(25,0,null,null,1,"ion-icon",[["name","construct"]],null,null,null,m.Z,m.q)),i.pb(26,49152,null,0,p.E,[i.h,i.k],{name:[0,"name"]},null),(n()(),i.qb(27,0,null,0,6,"ion-item-option",[["color","danger"]],null,[[null,"click"]],function(n,l,e){var i=!0;return"click"===l&&(i=!1!==n.component.eliminar(n.context.$implicit)&&i),i},m.bb,m.t)),i.pb(28,49152,null,0,p.M,[i.h,i.k],{color:[0,"color"]},null),(n()(),i.qb(29,0,null,0,4,"div",[["class","divText"]],null,null,null,null,null)),(n()(),i.qb(30,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),i.Fb(-1,null,["Borrar"])),(n()(),i.qb(32,0,null,null,1,"ion-icon",[["name","trash"]],null,null,null,m.Z,m.q)),i.pb(33,49152,null,0,p.E,[i.h,i.k],{name:[0,"name"]},null)],function(n,l){n(l,7,0,null!==l.context.$implicit.url),n(l,9,0,null===l.context.$implicit.url),n(l,19,0,"end"),n(l,26,0,"construct"),n(l,28,0,"danger"),n(l,33,0,"trash")},function(n,l){n(l,13,0,l.context.$implicit.descripcion),n(l,15,0,l.context.$implicit.categoria_descripcion),n(l,17,0,l.context.$implicit.fecha)})}function x(n){return i.Gb(0,[(n()(),i.qb(0,0,null,null,5,"ion-fab",[["class","animated swing"],["horizontal","end"],["slot","fixed"],["vertical","bottom"]],null,null,null,m.W,m.m)),i.pb(1,49152,null,0,p.y,[i.h,i.k],{horizontal:[0,"horizontal"],vertical:[1,"vertical"]},null),(n()(),i.qb(2,0,null,0,3,"ion-fab-button",[["color","dark"]],null,[[null,"click"]],function(n,l,e){var i=!0;return"click"===l&&(i=!1!==n.component.openCrud(1)&&i),i},m.V,m.n)),i.pb(3,49152,null,0,p.z,[i.h,i.k],{color:[0,"color"]},null),(n()(),i.qb(4,0,null,0,1,"ion-icon",[["name","add"]],null,null,null,m.Z,m.q)),i.pb(5,49152,null,0,p.E,[i.h,i.k],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"end","bottom"),n(l,3,0,"dark"),n(l,5,0,"add")},null)}function _(n){return i.Gb(0,[(n()(),i.qb(0,0,null,null,10,"ion-header",[["color","icon"]],null,null,null,m.Y,m.p)),i.pb(1,49152,null,0,p.D,[i.h,i.k],null,null),(n()(),i.qb(2,0,null,0,8,"ion-toolbar",[["color","icon"]],null,null,null,m.rb,m.I)),i.pb(3,49152,null,0,p.Db,[i.h,i.k],{color:[0,"color"]},null),(n()(),i.qb(4,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,m.N,m.e)),i.pb(5,49152,null,0,p.n,[i.h,i.k],null,null),(n()(),i.qb(6,0,null,0,1,"ion-menu-button",[],null,null,null,m.hb,m.z)),i.pb(7,49152,null,0,p.T,[i.h,i.k],null,null),(n()(),i.qb(8,0,null,0,2,"ion-title",[],null,null,null,m.qb,m.H)),i.pb(9,49152,null,0,p.Bb,[i.h,i.k],null,null),(n()(),i.Fb(-1,0,[" Cursos "])),(n()(),i.qb(11,0,null,null,13,"ion-content",[],null,null,null,m.U,m.l)),i.pb(12,49152,null,0,p.w,[i.h,i.k],null,null),(n()(),i.hb(16777216,null,0,1,null,C)),i.pb(14,16384,null,0,y.i,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(n()(),i.qb(15,0,null,0,3,"ion-refresher",[["slot","fixed"]],null,[[null,"ionRefresh"]],function(n,l,e){var i=!0;return"ionRefresh"===l&&(i=!1!==n.component.ionRefresh(e)&&i),i},m.lb,m.B)),i.pb(16,49152,null,0,p.eb,[i.h,i.k],null,null),(n()(),i.qb(17,0,null,0,1,"ion-refresher-content",[["pullingIcon","arrow-dropdown"],["refreshingSpinner","circles"]],null,null,null,m.kb,m.C)),i.pb(18,49152,null,0,p.fb,[i.h,i.k],{pullingIcon:[0,"pullingIcon"],refreshingSpinner:[1,"refreshingSpinner"]},null),(n()(),i.qb(19,0,null,0,3,"ion-list",[["class","margin_top_list"]],null,null,null,m.gb,m.x)),i.pb(20,49152,null,0,p.Q,[i.h,i.k],null,null),(n()(),i.hb(16777216,null,0,1,null,P)),i.pb(22,278528,null,0,y.h,[i.P,i.M,i.s],{ngForOf:[0,"ngForOf"]},null),(n()(),i.hb(16777216,null,0,1,null,x)),i.pb(24,16384,null,0,y.i,[i.P,i.M],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,3,0,"icon"),n(l,14,0,null==e.videos||0==e.videos.length),n(l,18,0,"arrow-dropdown","circles"),n(l,22,0,e.videos),n(l,24,0,1==e.user.id_rol&&null!==e.videos&&e.videos.length>0)},null)}function M(n){return i.Gb(0,[(n()(),i.qb(0,0,null,null,1,"app-videos-admin",[],null,null,null,_,q)),i.pb(1,114688,null,0,b,[a.a,s.a,c.a,k.c,p.Jb,p.b],null,null)],function(n,l){n(l,1,0)},null)}var I=i.mb("app-videos-admin",b,M,{},{},[]),O=e("2Hb1"),F=e("gIcY"),E=e("ZYCi"),B=e("PCNd");e.d(l,"VideosAdminPageModuleNgFactory",function(){return V});var V=i.nb(d,[],function(n){return i.xb([i.yb(512,i.j,i.cb,[[8,[h.a,g.a,f.a,v.a,I,O.a]],[3,i.j],i.x]),i.yb(4608,y.k,y.j,[i.u,[2,y.s]]),i.yb(4608,F.t,F.t,[]),i.yb(4608,p.c,p.c,[i.z,i.g]),i.yb(4608,p.Jb,p.Jb,[p.c,i.j,i.q,y.c]),i.yb(4608,p.Nb,p.Nb,[p.c,i.j,i.q,y.c]),i.yb(4608,F.e,F.e,[]),i.yb(1073742336,y.b,y.b,[]),i.yb(1073742336,F.r,F.r,[]),i.yb(1073742336,F.h,F.h,[]),i.yb(1073742336,p.Fb,p.Fb,[]),i.yb(1073742336,E.n,E.n,[[2,E.t],[2,E.m]]),i.yb(1073742336,B.a,B.a,[]),i.yb(1073742336,F.o,F.o,[]),i.yb(1073742336,d,d,[]),i.yb(1024,E.k,function(){return[[{path:"",component:b}]]},[])])})}}]);