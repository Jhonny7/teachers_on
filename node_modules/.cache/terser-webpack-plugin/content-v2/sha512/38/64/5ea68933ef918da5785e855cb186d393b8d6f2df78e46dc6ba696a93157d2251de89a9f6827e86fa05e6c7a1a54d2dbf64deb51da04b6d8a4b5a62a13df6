{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{b1GX:function(n,l,i){\"use strict\";i.r(l);var u=i(\"CcnG\"),t=i(\"mrSG\"),o=i(\"k/9R\"),e=function(){return function(n,l,i,u,t,o,e,r,a){this.id=n,this.idRol=l,this.nombre=i,this.apellidoPaterno=u,this.apellidoMaterno=t,this.email=o,this.fecha=e,this.img=r,this.idStatus=a}}(),r=i(\"sYLr\"),a=i(\"mhKI\"),s=i(\"jXL6\"),c=i(\"ZZ/e\"),p=function(){function n(n,l,i,u,t){this.genericService=n,this.loadingService=l,this.alertaService=i,this.modalController=u,this.alertCtrl=t,this.page=0,this.limit=10,this.usuarios=[],this.user=JSON.parse(localStorage.getItem(\"user\")),this.cargarUsuariosByPage()}return n.prototype.ngOnInit=function(){},n.prototype.ionRefresh=function(n){var l=this;setTimeout(function(){l.usuarios=[],l.page=0,n.target.complete(),l.cargarUsuariosByPage()},3e3)},n.prototype.cargarUsuariosByPage=function(){var n=this;this.usuarios=[],this.genericService.post(\"usuarios/getUsuarios\",JSON.stringify(0!==this.page?{start:this.page*this.limit+1,end:this.limit}:{start:this.page,end:this.limit})).subscribe(function(l){console.log(l),l.parameters&&l.parameters.forEach(function(l){n.usuarios.push(new e(l.id,l.id_rol,l.nombre,l.apellido_paterno,l.apellido_materno,l.email,l.fecha,l.img_base64,l.id_status))}),n.page++,n.loadingService.hide()},function(l){console.log(l.error.description),console.log(l.error),n.loadingService.hide(),n.alertaService.warnAlert(n.genericService.headerError,l.error.description,null)})},n.prototype.editar=function(n){this.usuario=n,this.openCrud(2)},n.prototype.openCrud=function(n){return t.b(this,void 0,void 0,function(){var l,i=this;return t.e(this,function(u){switch(u.label){case 0:return 1!=n?[3,3]:[4,this.modalController.create({component:o.a,componentProps:{type:\"Crear\",usuarios:this.usuarios}})];case 1:return(l=u.sent()).onDidDismiss().then(function(n){var l=n.data.data;console.log(l),1==l?(i.page=0,i.cargarUsuariosByPage()):(console.log(\"Data null\"),i.loadingService.hide())}),[4,l.present()];case 2:return[2,u.sent()];case 3:this.openModalEdit(this.usuario),u.label=4;case 4:return[2]}})})},n.prototype.openModalEdit=function(n){return t.b(this,void 0,void 0,function(){var l,i=this;return t.e(this,function(u){switch(u.label){case 0:return[4,this.modalController.create({component:o.a,componentProps:{type:\"Editar\",usuario:n}})];case 1:return(l=u.sent()).onDidDismiss().then(function(n){console.log(n),console.log(n.data);var l=n.data.data;console.log(l),1==l?(i.page=0,i.cargarUsuariosByPage()):(console.log(\"Data null\"),i.loadingService.hide())}),[4,l.present()];case 2:return[2,u.sent()]}})})},n.prototype.eliminar=function(n){return t.b(this,void 0,void 0,function(){var l=this;return t.e(this,function(i){switch(i.label){case 0:return[4,this.alertCtrl.create({header:\"Confirmaci\\xf3n\",message:\"\\xbfEst\\xe1s seguro de eliminar el usuario?, \\xe9ste ya no podr\\xe1 acceder a la plataforma.\",buttons:[{text:\"Cancelar\",handler:function(){}},{text:\"Aceptar\",handler:function(){l.eliminarUsuario(n)}}]})];case 1:return[4,i.sent().present()];case 2:return[2,i.sent()]}})})},n.prototype.eliminarUsuario=function(n){return t.b(this,void 0,void 0,function(){var l,i=this;return t.e(this,function(u){return l={id:n.id},this.loadingService.show().then(function(){i.genericService.post(\"usuarios/deleteUsuario\",JSON.stringify(l)).subscribe(function(l){if(console.log(l),\"A\"==l.status)return i.removeitem(n).then(function(){i.loadingService.hide()});i.alertaService.warnAlert(i.genericService.headerValidacion,l.description,null),i.loadingService.hide()},function(n){console.log(n),i.loadingService.hide(),i.alertaService.errorAlert(i.genericService.headerError,n.error.description,null)})}),[2]})})},n.prototype.removeitem=function(n){return t.b(this,void 0,void 0,function(){var l;return t.e(this,function(i){return l=this.usuarios.findIndex(function(l){return l.id==n.id}),this.usuarios=this.usuarios.slice(0,l).concat(this.usuarios.slice(l+1)),[2,new Promise(function(n){n(!0)})]})})},n}(),b=function(){return function(){}}(),h=i(\"pMnS\"),d=i(\"RIls\"),g=i(\"IiMW\"),f=i(\"OoFP\"),m=i(\"oBZk\"),v=i(\"Ip0R\"),k=u.ob({encapsulation:0,styles:[[\".welcome-card[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{max-height:35vh;overflow:hidden}.margin_top[_ngcontent-%COMP%]{margin-top:0}.margin_top_list[_ngcontent-%COMP%]{margin-top:4px}.divText[_ngcontent-%COMP%]{margin-top:-5px}.divText[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;margin-right:5px}.popover-translucent.sc-ion-popover-ios-h[_ngcontent-%COMP%]   .popover-arrow.sc-ion-popover-ios[_ngcontent-%COMP%]:after, .popover-translucent.sc-ion-popover-ios-h[_ngcontent-%COMP%]   .popover-content.sc-ion-popover-ios[_ngcontent-%COMP%]{background:rgba(var(--ion-background-color-rgb,255,255,255),.8);top:47px;left:calc(62px - var(--ion-safe-area-right,0px))!important;-webkit-transform-origin:right top;transform-origin:right top;width:311px}\"]],data:{}});function q(n){return u.Gb(0,[(n()(),u.qb(0,0,null,null,2,\"div\",[[\"class\",\"contenedorSpinner\"]],null,null,null,null,null)),(n()(),u.qb(1,0,null,null,1,\"ion-spinner\",[],null,null,null,m.ob,m.F)),u.pb(2,49152,null,0,c.tb,[u.h,u.k],null,null)],null,null)}function y(n){return u.Gb(0,[(n()(),u.qb(0,0,null,null,0,\"img\",[],[[8,\"src\",4]],null,null,null,null))],null,function(n,l){n(l,0,0,u.sb(1,\"\",l.parent.context.$implicit.img,\"\"))})}function x(n){return u.Gb(0,[(n()(),u.qb(0,0,null,null,0,\"img\",[[\"src\",\"assets/imgs/usuarios/user.svg\"]],null,null,null,null,null))],null,null)}function P(n){return u.Gb(0,[(n()(),u.qb(0,0,null,null,33,\"ion-item-sliding\",[[\"class\",\"animated tada\"]],null,null,null,m.db,m.v)),u.pb(1,49152,null,0,c.O,[u.h,u.k],null,null),(n()(),u.qb(2,0,null,0,15,\"ion-item\",[[\"class\",\"margin_top\"]],null,null,null,m.eb,m.s)),u.pb(3,49152,null,0,c.J,[u.h,u.k],null,null),(n()(),u.qb(4,0,null,0,5,\"ion-avatar\",[[\"slot\",\"start\"]],null,null,null,m.K,m.b)),u.pb(5,49152,null,0,c.h,[u.h,u.k],null,null),(n()(),u.hb(16777216,null,0,1,null,y)),u.pb(7,16384,null,0,v.i,[u.P,u.M],{ngIf:[0,\"ngIf\"]},null),(n()(),u.hb(16777216,null,0,1,null,x)),u.pb(9,16384,null,0,v.i,[u.P,u.M],{ngIf:[0,\"ngIf\"]},null),(n()(),u.qb(10,0,null,0,7,\"ion-label\",[],null,null,null,m.fb,m.w)),u.pb(11,49152,null,0,c.P,[u.h,u.k],null,null),(n()(),u.qb(12,0,null,0,1,\"h2\",[],null,null,null,null,null)),(n()(),u.Fb(13,null,[\"\",\" \",\" \",\"\"])),(n()(),u.qb(14,0,null,0,1,\"h3\",[],null,null,null,null,null)),(n()(),u.Fb(15,null,[\"\",\"\"])),(n()(),u.qb(16,0,null,0,1,\"p\",[],null,null,null,null,null)),(n()(),u.Fb(17,null,[\"Fecha de creaci\\xf3n: \",\"\"])),(n()(),u.qb(18,0,null,0,15,\"ion-item-options\",[[\"class\",\"margin_top\"],[\"side\",\"end\"]],null,null,null,m.cb,m.u)),u.pb(19,49152,null,0,c.N,[u.h,u.k],{side:[0,\"side\"]},null),(n()(),u.qb(20,0,null,0,6,\"ion-item-option\",[],null,[[null,\"click\"]],function(n,l,i){var u=!0;return\"click\"===l&&(u=!1!==n.component.editar(n.context.$implicit)&&u),u},m.bb,m.t)),u.pb(21,49152,null,0,c.M,[u.h,u.k],null,null),(n()(),u.qb(22,0,null,0,4,\"div\",[[\"class\",\"divText\"]],null,null,null,null,null)),(n()(),u.qb(23,0,null,null,1,\"div\",[],null,null,null,null,null)),(n()(),u.Fb(-1,null,[\"Editar\"])),(n()(),u.qb(25,0,null,null,1,\"ion-icon\",[[\"name\",\"construct\"]],null,null,null,m.Z,m.q)),u.pb(26,49152,null,0,c.E,[u.h,u.k],{name:[0,\"name\"]},null),(n()(),u.qb(27,0,null,0,6,\"ion-item-option\",[[\"color\",\"danger\"]],null,[[null,\"click\"]],function(n,l,i){var u=!0;return\"click\"===l&&(u=!1!==n.component.eliminar(n.context.$implicit)&&u),u},m.bb,m.t)),u.pb(28,49152,null,0,c.M,[u.h,u.k],{color:[0,\"color\"]},null),(n()(),u.qb(29,0,null,0,4,\"div\",[[\"class\",\"divText\"]],null,null,null,null,null)),(n()(),u.qb(30,0,null,null,1,\"div\",[],null,null,null,null,null)),(n()(),u.Fb(-1,null,[\"Borrar\"])),(n()(),u.qb(32,0,null,null,1,\"ion-icon\",[[\"name\",\"trash\"]],null,null,null,m.Z,m.q)),u.pb(33,49152,null,0,c.E,[u.h,u.k],{name:[0,\"name\"]},null)],function(n,l){n(l,7,0,null!==l.context.$implicit.img),n(l,9,0,null===l.context.$implicit.img),n(l,19,0,\"end\"),n(l,26,0,\"construct\"),n(l,28,0,\"danger\"),n(l,33,0,\"trash\")},function(n,l){n(l,13,0,l.context.$implicit.nombre,l.context.$implicit.apellidoPaterno,l.context.$implicit.apellidoMaterno),n(l,15,0,l.context.$implicit.email),n(l,17,0,l.context.$implicit.fecha)})}function S(n){return u.Gb(0,[(n()(),u.qb(0,0,null,null,5,\"ion-fab\",[[\"class\",\"animated swing\"],[\"horizontal\",\"end\"],[\"slot\",\"fixed\"],[\"vertical\",\"bottom\"]],null,null,null,m.W,m.m)),u.pb(1,49152,null,0,c.y,[u.h,u.k],{horizontal:[0,\"horizontal\"],vertical:[1,\"vertical\"]},null),(n()(),u.qb(2,0,null,0,3,\"ion-fab-button\",[[\"color\",\"dark\"]],null,[[null,\"click\"]],function(n,l,i){var u=!0;return\"click\"===l&&(u=!1!==n.component.openCrud(1)&&u),u},m.V,m.n)),u.pb(3,49152,null,0,c.z,[u.h,u.k],{color:[0,\"color\"]},null),(n()(),u.qb(4,0,null,0,1,\"ion-icon\",[[\"name\",\"add\"]],null,null,null,m.Z,m.q)),u.pb(5,49152,null,0,c.E,[u.h,u.k],{name:[0,\"name\"]},null)],function(n,l){n(l,1,0,\"end\",\"bottom\"),n(l,3,0,\"dark\"),n(l,5,0,\"add\")},null)}function w(n){return u.Gb(0,[(n()(),u.qb(0,0,null,null,10,\"ion-header\",[[\"color\",\"icon\"]],null,null,null,m.Y,m.p)),u.pb(1,49152,null,0,c.D,[u.h,u.k],null,null),(n()(),u.qb(2,0,null,0,8,\"ion-toolbar\",[[\"color\",\"icon\"]],null,null,null,m.rb,m.I)),u.pb(3,49152,null,0,c.Db,[u.h,u.k],{color:[0,\"color\"]},null),(n()(),u.qb(4,0,null,0,3,\"ion-buttons\",[[\"slot\",\"start\"]],null,null,null,m.N,m.e)),u.pb(5,49152,null,0,c.n,[u.h,u.k],null,null),(n()(),u.qb(6,0,null,0,1,\"ion-menu-button\",[],null,null,null,m.hb,m.z)),u.pb(7,49152,null,0,c.T,[u.h,u.k],null,null),(n()(),u.qb(8,0,null,0,2,\"ion-title\",[],null,null,null,m.qb,m.H)),u.pb(9,49152,null,0,c.Bb,[u.h,u.k],null,null),(n()(),u.Fb(-1,0,[\" Usuarios \"])),(n()(),u.qb(11,0,null,null,13,\"ion-content\",[],null,null,null,m.U,m.l)),u.pb(12,49152,null,0,c.w,[u.h,u.k],null,null),(n()(),u.hb(16777216,null,0,1,null,q)),u.pb(14,16384,null,0,v.i,[u.P,u.M],{ngIf:[0,\"ngIf\"]},null),(n()(),u.qb(15,0,null,0,3,\"ion-refresher\",[[\"slot\",\"fixed\"]],null,[[null,\"ionRefresh\"]],function(n,l,i){var u=!0;return\"ionRefresh\"===l&&(u=!1!==n.component.ionRefresh(i)&&u),u},m.lb,m.B)),u.pb(16,49152,null,0,c.eb,[u.h,u.k],null,null),(n()(),u.qb(17,0,null,0,1,\"ion-refresher-content\",[[\"pullingIcon\",\"arrow-dropdown\"],[\"refreshingSpinner\",\"circles\"]],null,null,null,m.kb,m.C)),u.pb(18,49152,null,0,c.fb,[u.h,u.k],{pullingIcon:[0,\"pullingIcon\"],refreshingSpinner:[1,\"refreshingSpinner\"]},null),(n()(),u.qb(19,0,null,0,3,\"ion-list\",[[\"class\",\"margin_top_list\"]],null,null,null,m.gb,m.x)),u.pb(20,49152,null,0,c.Q,[u.h,u.k],null,null),(n()(),u.hb(16777216,null,0,1,null,P)),u.pb(22,278528,null,0,v.h,[u.P,u.M,u.s],{ngForOf:[0,\"ngForOf\"]},null),(n()(),u.hb(16777216,null,0,1,null,S)),u.pb(24,16384,null,0,v.i,[u.P,u.M],{ngIf:[0,\"ngIf\"]},null)],function(n,l){var i=l.component;n(l,3,0,\"icon\"),n(l,14,0,null==i.usuarios||0==i.usuarios.length),n(l,18,0,\"arrow-dropdown\",\"circles\"),n(l,22,0,i.usuarios),n(l,24,0,1==i.user.id_rol&&null!==i.usuarios&&i.usuarios.length>0)},null)}function C(n){return u.Gb(0,[(n()(),u.qb(0,0,null,null,1,\"app-usuarios\",[],null,null,null,w,k)),u.pb(1,114688,null,0,p,[r.a,a.a,s.a,c.Jb,c.b],null,null)],function(n,l){n(l,1,0)},null)}var M=u.mb(\"app-usuarios\",p,C,{},{},[]),_=i(\"6+zG\"),I=i(\"gIcY\"),O=i(\"ZYCi\"),F=i(\"PCNd\");i.d(l,\"UsuariosPageModuleNgFactory\",function(){return U});var U=u.nb(b,[],function(n){return u.xb([u.yb(512,u.j,u.cb,[[8,[h.a,d.a,g.a,f.a,M,_.a]],[3,u.j],u.x]),u.yb(4608,v.k,v.j,[u.u,[2,v.s]]),u.yb(4608,I.t,I.t,[]),u.yb(4608,c.c,c.c,[u.z,u.g]),u.yb(4608,c.Jb,c.Jb,[c.c,u.j,u.q,v.c]),u.yb(4608,c.Nb,c.Nb,[c.c,u.j,u.q,v.c]),u.yb(4608,I.e,I.e,[]),u.yb(1073742336,v.b,v.b,[]),u.yb(1073742336,I.r,I.r,[]),u.yb(1073742336,I.h,I.h,[]),u.yb(1073742336,c.Fb,c.Fb,[]),u.yb(1073742336,O.n,O.n,[[2,O.t],[2,O.m]]),u.yb(1073742336,F.a,F.a,[]),u.yb(1073742336,I.o,I.o,[]),u.yb(1073742336,b,b,[]),u.yb(1024,O.k,function(){return[[{path:\"\",component:p}]]},[])])})}}]);","extractedComments":[]}